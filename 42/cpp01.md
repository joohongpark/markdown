# C++ 입문 #1 (C++ Module 01)

## ex01

적절한 "Pony"라는 무엇인가 동작하는 클래스를 만들고 힙 영역에 할당하는 함수와 스택 영역에 할당하는 함수를 만들라는 문제이다.

### 학습해야 할 내용

- 힙영역 할당/스택영역 할당
- C++의 new 연산자와 delete 연산자

### 힙영역과 스택영역 할당의 차이

C를 코딩해본 사람이라면 전역변수를 제외하면 대부분 지역변수를 사용해서 변수나 구조체 포인터 등을 사용한다. 이런 경우 함수가 호출되면 이 지역변수들은 모두 스택에 쌓이게 된다.

프로그램이 실행되는 프로세스의 형태에서도 프로세스의 스택 영역엔 함수의 매개변수나 지역변수 등이 저장된다. 그러니까 전역/정적 변수를 사용하는 경우를 제외하고 평범하게 코딩한다면 사실상 스택 영역에 변수를 할당하여 사용하는 것이다.

따라서 어느 함수의 지역변수로 사용되면 이는 스택 영역에 할당된 것으로 보아도 되는 것이다.

힙 영역은 동적으로 할당된 변수가 저장되는 공간이다. C에서는 malloc, calloc 등 메모리 동적 할당 함수를 사용해 힙 영역에 원하는 공간만큼 할당하고 할당된 힙 메모리 주소를 리턴한다.

힙 영역은 스택 영역과 다르게 변수를 얼마나 할당해야 하는지 미리 알려주지 않고 코드 실행 도중 원하는 크기만큼 할당할 수 있다.

### new 연산자, delete 연산자

C++에서 인스턴스와 같은 것을 동적으로 할당할 때 보통 new 연산자를 사용한다. malloc과 같은 함수가 사용이 불가능한 것은 아니지만 new 연산자를 사용한다. (malloc는 함수이고 new는 C++에서 지원하는 문법이다.)

그리고 클래스로부터 인스턴스를 생성할 때 malloc 함수를 이용해서 생성하면 생성자가 호출되지 않으므로 불편하다. new 연산자는 인스턴스가 생성될 때 자동으로 생성자도 호출해 준다.

free 함수에 대응되는 연산자는 delete이다. 이것도 malloc/new 연산자의 관계와 비슷하다.

